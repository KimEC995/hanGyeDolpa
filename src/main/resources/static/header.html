<!DOCTYPE html>
<body>
      <div id="mainHeader">
          <a href="#" onclick="SPA_mainPage()"><img id="mainHeaderLogo" src="img/logo.png" width="110"></a>
          
          <div id="checkLogin"></div>
          
      </div>
      <table id="mainHeaderTableBar">
          <tbody>
              <tr>
                  <td><a href="#" onclick="SPA_AboutPage()">서비스 소개</a></td>
                  <td><a href="../dashBoardTest">대시보드</a></td>
                  <td><a href="../communityTest">커뮤니티</a></td>
                  <td><a href="../locationTest">클라이밍 위치</a></td>
              </tr>
          </tbody>
      </table>
      <br>
      
      <article></article>
</body>

<script>

	const loginDiv = document.getElementById("checkLogin");
	var loginDivTags = '';
	
	fetch("/mainHeaderCheckUserLogin")
	   .then(resp => resp.json())
	   .then(data => {
	   	console.log("Flag: " + data.flag);
	
	       if (data.flag) {
	           //console.log(data.user.userAlias);
	    	   loginDivTags = '<p>환영합니다!' + data.user.userAlias;
	    	   loginDivTags += '</p>';
	    	   loginDivTags += '<a href="/userProfileTest" ><img id="userProfile" src="'+ data.user.userProfilePath +'"></a>';
	       }
	       else {
	   	   		//console.log("로그인없슴");
	    	   loginDivTags += '<a href="/loginTest">로그인</a>';
	       }
	       
	       loginDiv.innerHTML = loginDivTags;
	   })
	   
	   .catch(err => {
		   console.error("Fetch error:", err);
	   });
	
	function SPA_AboutPage(){
		fetch('/locationTest').then(function(resp){
			resp.text().then(function(text){
				document.querySelector('article').innerHTML = text;
			})
			
			.catch(err => {
				console.error("About-Page Fetch err: ", err);
			})
		});
	}
	
	

 </script>
